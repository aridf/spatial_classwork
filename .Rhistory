lyofs_2019)
df$date_recd
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace(df$date_recd, '/', '-')
df$date_recd
parse_date(df$date_recd)
df$date_recd <- str_replace(df$date_recd, '/', '-')
df$date_recd
parse_date(df$date_recd)
df$date_recd <- str_replace(df$date_recd, '-', '/')
parse_date(df$date_recd)
problems(parse_date(df$date_recd))
parse_dates(df$date_recd)
?parse_date
df$date_recd
library(readxl)
library(tidyverse)
lyofs_2015 <- read_csv('a3/data/warn_ohio_2015.csv')
lyofs_2016 <- read_csv('a3/data/warn_ohio_2016.csv')
lyofs_2017 <- read_csv('a3/data/warn_ohio_2017.csv')
lyofs_2018 <- read_csv('a3/data/warn_ohio_2018.csv')
lyofs_2019 <- read_csv('a3/data/warn_ohio_2019.csv')
lyofs_2015$year <- 2015
lyofs_2016$year <- 2016
lyofs_2017$year <- 2017
lyofs_2018$year <- 2018
lyofs_2019$year <- 2019
df <- rbind(lyofs_2015,
lyofs_2016,
lyofs_2017,
lyofs_2018,
lyofs_2019)
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace(df$date_recd, '/', '-')
df$date_recd
df$date_recd <- str_replace(df$date_recd, '/', '-')
df$date_recd
parse_dates(df$date_recd, format = '%m-%d-%Y')
parse_date(df$date_recd, format = '%m-%d-%Y')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
lyofs_2015 <- read_csv('a3/data/warn_ohio_2015.csv')
lyofs_2016 <- read_csv('a3/data/warn_ohio_2016.csv')
lyofs_2017 <- read_csv('a3/data/warn_ohio_2017.csv')
lyofs_2018 <- read_csv('a3/data/warn_ohio_2018.csv')
lyofs_2019 <- read_csv('a3/data/warn_ohio_2019.csv')
lyofs_2015$year <- 2015
lyofs_2016$year <- 2016
lyofs_2017$year <- 2017
lyofs_2018$year <- 2018
lyofs_2019$year <- 2019
df <- rbind(lyofs_2015,
lyofs_2016,
lyofs_2017,
lyofs_2018,
lyofs_2019)
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace(df$date_recd, '/', '-')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
df$date_recd <- str_replace(df$date_recd, '/', '-')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
lyofs_2015 <- read_csv('a3/data/warn_ohio_2015.csv')
lyofs_2016 <- read_csv('a3/data/warn_ohio_2016.csv')
lyofs_2017 <- read_csv('a3/data/warn_ohio_2017.csv')
lyofs_2018 <- read_csv('a3/data/warn_ohio_2018.csv')
lyofs_2019 <- read_csv('a3/data/warn_ohio_2019.csv')
lyofs_2015$year <- 2015
lyofs_2016$year <- 2016
lyofs_2017$year <- 2017
lyofs_2018$year <- 2018
lyofs_2019$year <- 2019
df <- rbind(lyofs_2015,
lyofs_2016,
lyofs_2017,
lyofs_2018,
lyofs_2019)
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace(df$date_recd, '/', '-')
df$date_recd <- str_replace(df$date_recd, '/', '-')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
?str_replace_all
lyofs_2015 <- read_csv('a3/data/warn_ohio_2015.csv')
lyofs_2016 <- read_csv('a3/data/warn_ohio_2016.csv')
lyofs_2017 <- read_csv('a3/data/warn_ohio_2017.csv')
lyofs_2018 <- read_csv('a3/data/warn_ohio_2018.csv')
lyofs_2019 <- read_csv('a3/data/warn_ohio_2019.csv')
lyofs_2015$year <- 2015
lyofs_2016$year <- 2016
lyofs_2017$year <- 2017
lyofs_2018$year <- 2018
lyofs_2019$year <- 2019
df <- rbind(lyofs_2015,
lyofs_2016,
lyofs_2017,
lyofs_2018,
lyofs_2019)
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace_all(df$date_recd, '/', '-')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
df$date_layoff
df$date_layoff <- str_remove(df$date_layoff, '\n')
df$date_layoff
lyofs_2015 <- read_csv('a3/data/warn_ohio_2015.csv')
lyofs_2016 <- read_csv('a3/data/warn_ohio_2016.csv')
lyofs_2017 <- read_csv('a3/data/warn_ohio_2017.csv')
lyofs_2018 <- read_csv('a3/data/warn_ohio_2018.csv')
lyofs_2019 <- read_csv('a3/data/warn_ohio_2019.csv')
lyofs_2015$year <- 2015
lyofs_2016$year <- 2016
lyofs_2017$year <- 2017
lyofs_2018$year <- 2018
lyofs_2019$year <- 2019
df <- rbind(lyofs_2015,
lyofs_2016,
lyofs_2017,
lyofs_2018,
lyofs_2019)
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace_all(df$date_recd, '/', '-')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
df$date_layoff
df$date_layoff <- str_remove(df$date_layoff, '\n')
df$date_layoff
?apply
library(stringr)
?substr
df$date_layoff <- apply(df$date_layoff, 1, function(x) ifelse(length(x) > 15, str_sub(x, -10, -1), x))
df$date_layoff <- sapply(df$date_layoff, 1,
function(x) ifelse(length(x) > 15, str_sub(x, -10, -1), x))
df$date_layoff <- sapply(df$date_layoff,
function(x) ifelse(length(x) > 15, str_sub(x, -10, -1), x))
df$date_layoff
sapply(df$date_layoff,
function(x) ifelse(length(x) > 15, str_sub(x, -10, -1), x))
df$date_layoff <- sapply(df$date_layoff,
function(x) ifelse(length(x) > 15, print('Yes'), x))
sapply(df$date_layoff,
function(x) ifelse(length(x) > 15, print('Yes'), x))
df$date_layoff <- sapply(df$date_layoff,
function(x) ifelse(length(x) > 15,
return(str_sub(x, -10, -1)),
return(x)))
df$date_layoff
df$date_layoff <- df$date_layoff %>%
print()
df$date_layoff <- df$date_layoff %>%
case_when(
str_length(.) > 15 ~ "YAP",
TRUE ~ 'NAP'
)
df$date_layoff <- df$date_layoff %>%
case_when(
str_length() > 15 ~ "YAP",
TRUE ~ 'NAP'
)
str_length(df$date_layoff) > 15
df$date_layoff <- df$date_layoff %>%
case_when(
str_length(df$date_layoff) > 15 ~ "YAP",
TRUE ~ 'NAP'
)
df$date_layoff <- df$date_layoff %>%
case_when(
str_length(df$date_layoff) > 15 ~ "YAP",
TRUE ~ 'NAP'
)
df $>$
mutate(date = ifelse(str_length(date_layoff > 12,
str_sub(date_layoff, -12, -1),
date_layoff)))
mutate(df, date = ifelse(str_length(date_layoff > 12,
str_sub(date_layoff, -12, -1),
date_layoff)))
mutate(df, date = ifelse(str_length(date_layoff) > 12,
str_sub(date_layoff, -12, -1),
date_layoff))))
mutate(df, date = ifelse(str_length(date_layoff) > 12,
str_sub(date_layoff, -12, -1),
date_layoff)))
mutate(df, date = ifelse(str_length(date_layoff) > 12,
str_sub(date_layoff, -12, -1),
date_layoff))
df <- mutate(df, date = ifelse(str_length(date_layoff) > 12,
str_sub(date_layoff, -12, -1),
date_layoff))
df$date
df <- mutate(df, date = ifelse(str_length(date_layoff) > 12,
str_sub(date_layoff, -10, -1),
date_layoff))
df$date
df$date_layoff[7]
str_split(df$date_layoff[7], '-')
strsplit(df$date_layoff[7], '-')
strsplit(df$date_layoff[7], "-")
strsplit(df$date_layoff[7], "‐")
strsplit(df$date_layoff[7], "‐")
strsplit(df$date_layoff[7], "3")
strsplit(df$date_layoff[7], "-")
strsplit(df$date_layoff[8], "-")
strsplit(df$date_layoff[8], "9")
strsplit(df$date_layoff[9], "-")
strsplit(df$date_layoff[9], "‐")
class(df$date_layoff[9])
as.character(df$date_layoff[9])
Encoding(df$date_layoff) <- 'UTF-8'
df$date_layoff
str_split(df$date_layoff[7], '-')
str_split(df$date_layoff[7], '-|‐')
Encoding(df$date_layoff) <- 'UTF-8'
df$date_layoff
Encoding(df$date_layoff) <- 'ASCII'
str_split(df$date_layoff[7], '-|‐')
Encoding(df$date_layoff) <- 'ASCII-II'
str_split(df$date_layoff[7], '-|‐')
str_split(df$date_layoff[7], '-|â€\u00900')
str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2]
str_split(df$date_layoff[7], '-|â€\u00900')[2]
df <- mutate(df, date = ifelse(str_length(date_layoff) > 15,
str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff))
df$date
df$date_layoff[174]
df[174,]
lyofs_2015 <- read_csv('a3/data/warn_ohio_2015.csv')
lyofs_2016 <- read_csv('a3/data/warn_ohio_2016.csv')
lyofs_2017 <- read_csv('a3/data/warn_ohio_2017.csv')
lyofs_2018 <- read_csv('a3/data/warn_ohio_2018.csv')
lyofs_2019 <- read_csv('a3/data/warn_ohio_2019.csv')
lyofs_2015$year <- 2015
lyofs_2016$year <- 2016
lyofs_2017$year <- 2017
lyofs_2018$year <- 2018
lyofs_2019$year <- 2019
df <- rbind(lyofs_2015,
lyofs_2016,
lyofs_2017,
lyofs_2018,
lyofs_2019)
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace_all(df$date_recd, '/', '-')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
df$date_layoff <- str_remove(df$date_layoff, '\n')
df <- mutate(df, date = ifelse(str_length(date_layoff) > 15,
str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff))
df[174,]
lyofs_2015 <- read_csv('a3/data/warn_ohio_2015.csv')
lyofs_2016 <- read_csv('a3/data/warn_ohio_2016.csv')
lyofs_2017 <- read_csv('a3/data/warn_ohio_2017.csv')
lyofs_2018 <- read_csv('a3/data/warn_ohio_2018.csv')
lyofs_2019 <- read_csv('a3/data/warn_ohio_2019.csv')
lyofs_2015$year <- 2015
lyofs_2016$year <- 2016
lyofs_2017$year <- 2017
lyofs_2018$year <- 2018
lyofs_2019$year <- 2019
df <- rbind(lyofs_2015,
lyofs_2016,
lyofs_2017,
lyofs_2018,
lyofs_2019)
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace_all(df$date_recd, '/', '-')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
df$date_layoff <- str_remove(df$date_layoff, '\n')
df <- mutate(df, date_affected = ifelse(str_length(date_layoff) > 15,
str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff))
df <- df %>% select(-date_layoff)
head(df)
lyofs_2015 <- read_csv('a3/data/warn_ohio_2015.csv')
lyofs_2016 <- read_csv('a3/data/warn_ohio_2016.csv')
lyofs_2017 <- read_csv('a3/data/warn_ohio_2017.csv')
lyofs_2018 <- read_csv('a3/data/warn_ohio_2018.csv')
lyofs_2019 <- read_csv('a3/data/warn_ohio_2019.csv')
lyofs_2015$year <- 2015
lyofs_2016$year <- 2016
lyofs_2017$year <- 2017
lyofs_2018$year <- 2018
lyofs_2019$year <- 2019
df <- rbind(lyofs_2015,
lyofs_2016,
lyofs_2017,
lyofs_2018,
lyofs_2019)
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace_all(df$date_recd, '/', '-')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
df$date_layoff <- str_remove(df$date_layoff, '\n')
df <- mutate(df, date_affected = ifelse(str_length(date_layoff) > 15,
str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff))
df$date_affected
df$date_layoff
df %>% select(date_layoff, date_affected)
str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2]
str_split(df$date_layoff[7], '-|â€\u00900')
Encoding(df$date_layoff) <- "ASCII"
df <- mutate(df, date_affected = ifelse(str_length(date_layoff) > 15,
str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff))
df$date_layoff
df %>% select(date_layoff, date_affected)
df$date_affected <- str_remove(df$date_affected, '\n')
df$date_affected <- str_replace_all(df$date_affected, '/', '-')
df$date_affected <- parse_date(df$date_affected, format = '%m-%d-%Y')
df <- mutate(df, date_affected = ifelse(str_length(date_layoff) > 15,
str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff))
str_remove(df$date_affected, '\n')
df %>% filter(date_affected != 'Unknown')
mutate(df, date_affected = case_when(
str_length(date_layoff) > 15 ~ str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff == "Unknown|None" ~ NA,
TRUE ~ date_layoff))
df$date_layoff == "Unknown|None"
df$date_layoff == "Unknown"
date_layoff == "None"
df$date_layoff == "None" ~ NA
df$date_layoff == "None"
df <- mutate(df, date_affected = case_when(
str_length(date_layoff) > 15 ~ str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff == "Unknown" ~ NA,
sum(df$date_layoff == "None") ~ NA
TRUE ~ date_layoff))
sum(df$date_layoff == "None")
df <- mutate(df, date_affected = case_when(
str_length(date_layoff) > 15 ~ str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff == "Unknown" ~ NA,
df$date_layoff == "none" ~ NA
TRUE ~ date_layoff))
df <- mutate(df, date_affected = case_when(
str_length(date_layoff) > 15 ~ str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff == "Unknown" ~ NA,
df$date_layoff == "none" ~ NA,
TRUE ~ date_layoff))
Encoding(df$date_layoff) <- "ASCII"
df <- mutate(df, date_affected = case_when(
str_length(date_layoff) > 15 ~ str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff == "Unknown" ~ NA,
df$date_layoff == "none" ~ NA,
TRUE ~ date_layoff))
df <- mutate(df, date_affected = case_when(
str_length(date_layoff) > 15 ~ str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff == "Unknown" ~ NA,
df$date_layoff == "none" ~ NA,
TRUE ~ date_layoff))
Encoding(df$date_layoff) <- "ASCII"
df <- mutate(df, date_affected = case_when(
str_length(date_layoff) > 15 ~ str_split(df$date_layoff[7], '-|â€\u00900')[[1]][2],
date_layoff == "Unknown" ~ NA,
df$date_layoff == "none" ~ NA,
TRUE ~ date_layoff))
str_length(date_layoff) > 15
str_length(df$date_layoff) > 15
df <- mutate(df, date_affected = case_when(
str_length(date_layoff) > 15 ~ str_split('-|â€\u00900')[[1]][2],
date_layoff == "Unknown" ~ NA,
df$date_layoff == "none" ~ NA,
TRUE ~ date_layoff))
str_length(date_layoff) > 15
df <- mutate(df, date_affected = case_when(
str_length(date_layoff) > 15 ~ str_split(., '-|â€\u00900')[[1]][2],
date_layoff == "Unknown" ~ NA,
df$date_layoff == "none" ~ NA,
TRUE ~ date_layoff))
df <- mutate(df, date_affected = case_when(
str_length(date_layoff) > 15 ~ str_split(date_layoff, '-|â€\u00900')[[1]][2],
date_layoff == "Unknown" ~ NA,
df$date_layoff == "none" ~ NA,
TRUE ~ date_layoff))
df <- mutate(df, date_affected = ifelse(str_length(date_layoff) > 15,
str_split(df$date_layoff, '-|â€\u00900')[[1]][2],
date_layoff))
df$date_affected
Encoding(df$date_layoff) <- "ASCII"
df <- mutate(df, date_affected = ifelse(str_length(date_layoff) > 15,
str_split(df$date_layoff, '-|â€\u00900')[[1]][2],
date_layoff))
df$date_affected
Encoding(df$date_layoff) <- "ASCII"
df$date_affected
df$date_layoff
str_split(df$date_layoff, '-|â€\u00900')
list(str_split(df$date_layoff, '-|â€\u00900'))
unlist(str_split(df$date_layoff, '-|â€\u00900'))
df <- mutate(df, date_affected = ifelse(str_length(date_layoff) > 15,
unlist(str_split(df$date_layoff, '-|â€\u00900'))[2],
date_layoff))
df$date_affected
df %>% select(date_layoff, date_affected)
df$date_affected <- sapply(nrow(df), function(x)
ifelse(length(df$date_layoff[x]) > 15,
str_split(df$date_layoff[x], '-|â€\u00900'),
df$date_layoff))
df$date_affected
df$date_affected <- sapply(1:nrow(df), function(x)
ifelse(length(df$date_layoff[x]) > 15,
str_split(df$date_layoff[x], '-|â€\u00900'),
df$date_layoff))
df$date_affected
Encoding(df$date_layoff) <- "ASCII"
library(readxl)
library(tidyverse)
library(stringr)
lyofs_2015 <- read_csv('a3/data/warn_ohio_2015.csv')
lyofs_2016 <- read_csv('a3/data/warn_ohio_2016.csv')
lyofs_2017 <- read_csv('a3/data/warn_ohio_2017.csv')
lyofs_2018 <- read_csv('a3/data/warn_ohio_2018.csv')
lyofs_2019 <- read_csv('a3/data/warn_ohio_2019.csv')
lyofs_2015$year <- 2015
lyofs_2016$year <- 2016
lyofs_2017$year <- 2017
lyofs_2018$year <- 2018
lyofs_2019$year <- 2019
df <- rbind(lyofs_2015,
lyofs_2016,
lyofs_2017,
lyofs_2018,
lyofs_2019)
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace_all(df$date_recd, '/', '-')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
df$date_layoff <- str_remove(df$date_layoff, '\n')
Encoding(df$date_layoff) <- "ASCII"
df$date_affected <- sapply(1:nrow(df), function(x)
ifelse(length(df$date_layoff[x]) > 15,
str_split(df$date_layoff[x], '-|â€\u00900'),
df$date_layoff))
df$date_affected
df %>% select(date_layoff, date_affected)
df$date_affected <- str_remove(df$date_affected, '\n')
df$date_affected <- str_replace_all(df$date_affected, '/', '-')
df$date_affected <- parse_date(df$date_affected, format = '%m-%d-%Y')
library(readxl)
library(tidyverse)
library(stringr)
lyofs_2015 <- read_csv('a3/data/warn_ohio_2015.csv')
lyofs_2016 <- read_csv('a3/data/warn_ohio_2016.csv')
lyofs_2017 <- read_csv('a3/data/warn_ohio_2017.csv')
lyofs_2018 <- read_csv('a3/data/warn_ohio_2018.csv')
lyofs_2019 <- read_csv('a3/data/warn_ohio_2019.csv')
lyofs_2015$year <- 2015
lyofs_2016$year <- 2016
lyofs_2017$year <- 2017
lyofs_2018$year <- 2018
lyofs_2019$year <- 2019
df <- rbind(lyofs_2015,
lyofs_2016,
lyofs_2017,
lyofs_2018,
lyofs_2019)
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace_all(df$date_recd, '/', '-')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
df$date_layoff <- str_remove(df$date_layoff, '\n')
Encoding(df$date_layoff) <- "ASCII"
df$date_affected <- sapply(1:nrow(df), function(x)
ifelse(length(df$date_layoff[x]) > 15,
str_split(df$date_layoff[x], '-|â€\u00900'),
df$date_layoff))
df$date_affected
df %>% select(date_layoff, date_affected)
df$date_affected <- str_remove(df$date_affected, '\n')
df$date_affected <- str_replace_all(df$date_affected, '/', '-')
df$date_affected <- parse_date(df$date_affected, format = '%m-%d-%Y')
lyofs_2015 <- read_csv('a3/data/warn_ohio_2015.csv')
lyofs_2016 <- read_csv('a3/data/warn_ohio_2016.csv')
lyofs_2017 <- read_csv('a3/data/warn_ohio_2017.csv')
lyofs_2018 <- read_csv('a3/data/warn_ohio_2018.csv')
lyofs_2019 <- read_csv('a3/data/warn_ohio_2019.csv')
lyofs_2015$year <- 2015
lyofs_2016$year <- 2016
lyofs_2017$year <- 2017
lyofs_2018$year <- 2018
lyofs_2019$year <- 2019
df <- rbind(lyofs_2015,
lyofs_2016,
lyofs_2017,
lyofs_2018,
lyofs_2019)
df$date_recd <- str_remove(df$date_recd, '\n')
df$date_recd <- str_replace_all(df$date_recd, '/', '-')
df$date_recd <- parse_date(df$date_recd, format = '%m-%d-%Y')
df$date_layoff <- str_remove(df$date_layoff, '\n')
Encoding(df$date_layoff) <- "ASCII"
df$date_layoff
Encoding(df$date_layoff) <- "ASCII"
df$date_layoff
Encoding(df$date_layoff) <- "ASCII"
df$date_layoff
df$date_affected <- sapply(1:nrow(df), function(x)
ifelse(length(df$date_layoff[x]) > 15,
str_split(df$date_layoff[x], '-|â€\u00900')[[1]][2],
df$date_layoff))
df$date_affected
df$date_affected <- sapply(1:nrow(df), function(x)
print(x)
ifelse(length(df$date_layoff[x]) > 15,
str_split(df$date_layoff[x], '-|â€\u00900')[[1]][2],
df$date_layoff))
sapply(1:nrow(df), function(x)
print(x))
sapply(1:nrow(df), function(x)
print(df$date_layoff[x]))
sapply(1:nrow(df), function(x)
print(df$date_layoff[x]) > 15)
sapply(1:nrow(df), function(x)
print(str_split(df$date_layoff[x], '-|â€\u00900'))
)
df %>% mutate(date_affected = str_extract(date_layoff, '-|â€\u00900'))
df <- df %>% mutate(date_affected = str_extract(date_layoff, '-|â€\u00900'))
df$date_affected
